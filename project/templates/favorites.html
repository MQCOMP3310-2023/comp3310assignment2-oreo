{% extends "main.html" %}
{% block content %}
{% include "header.html" %}
  <div class="row top-menu">
    <div class="col-md-10"></div>
    <div class="col-md-2 text-right">
    </div>
  </div>
  <div class="row divider blue">
    <div class="col-md-12"></div>
  </div>
  <div class="row banner main">
    <div class="col-md-1"></div>
    <div class="col-md-11 padding-none">
      <h1>My Favorite Restaurants</h1>
    </div>
  </div>

  <div class='flash'>
    {% with messages = get_flashed_messages() %}
      {% if messages %}
        <ul>
          {% for message in messages %}
            <li> <strong> {{ message }} </strong> </li>
          {% endfor %}
        </ul>
      {% endif %}
    {% endwith %}
  </div>

  <div class="row padding-top padding-bottom">
    <div class="col-md-1"></div>
    <div class="col-md-10 padding-none">
    </div>
    <div class="col-md-1"></div>
  </div>

  {% for favorite in favorites %}
    <a href="{{url_for('main.show_menu', restaurant_id=favorite.restaurant_id)}}">
      <div class="row">
        <div class="col-md-1"></div>
        <div class="col-md-10 restaurant-list">
          <!-- Display the restaurant name -->
          <h3>{{favorite.restaurant.name}}</h3>
          <!-- Display the average rating for the restaurant -->
          {% with total = favorite.restaurant.restaurant_ratings|sum(attribute='value') %}
            {% if total > 0 %}
              Average rating: {{ (total / (favorite.restaurant.restaurant_ratings|length))|round(1) }}/5
            {% else %}
              No ratings yet.
            {% endif %}
          {% endwith %}
        </div>
        <div class="col-md-1"></div>
      </div>
    </a>
  {% endfor %}
{% endblock %}
